---
title: "リーダブルコード5章まとめ"
date: 2022-07-25
categories: ["本まとめ"]
tags: ["リーダブルコード"]
---

## 5章: コメントすべきことを知る

**コメントの目的は、書き手の意図を読み手に知らせることである。**

### コメントすべきでは「ない」こと

**コードからすぐにわかることをコメントに書かない**

関数の名前や引数名でわかることをわざわざコメントに書き直さなくて良い。

わかりにくい関数名の補足をコメントに書かない。  
関数名をわかりやすくするべきである。

### 自分の考えを記録する

映画のコメンタリーのように、何を考えて作ったか書くと良い。

例えば、コードが汚い理由を書いてもいい。  
```
// このクラスは汚くなってきている。  
// サブクラスを作った方がいいかもしれない。  
```

コードの欠陥にコメントをつけるときの記法の例
* TODO: 後で手を付ける
* FIXME: 既知の不具合がある
* HACK: あまり綺麗ではない解決策
* XXX: 大きな問題があり危険

定数がなぜその値なのかその背景をコメントを書く
```
// 合理的な限界値。人間はこんなに読めない。   
const int MAX_RSS_SUBSCRIPTIONS = 1000;
```

### 読み手の立場になって考える

質問されそうなところ、ハマりそうな罠は前もって予測してコメントを書いておく。

例えば普通に考える実装とは異なる場合、なぜそのような実装をしているかとか、  
入力によっては処理に時間がかかる関数に、処理時間を書いておいたりとか。

システムの全体像のコメントを書くことで、新しいチームメンバーがコードを読みやすくなる。

新しくチームに参加した人に教えるようなイメージで言葉を考えてコメントに書くと良い。

### ライターズブロックを乗り越える

簡単にコメントを書くためには
1. 頭のなかにあるコメントをとにかく書き出す。 
2. コメントを読んで改善が必要なものを見つける。 
3. 改善する。 

まずはとにかく書き出して、

`// ヤバい。これはリストに重複があったら面倒なことになる。 `

これを改善すればいい。

`// 注意:このコードはリストの重複を処理できません(実装が難しいので)。 `



### 5章の感想
“正しい”コメントの書き方とは、もっときっちりルール通りに書くものだと思っていた。

例えば、関数の定義を書き、関数がどこで呼び出され、引数は何をとるのか。などを全ての関数について書いていけば読みやすいのではと今までは考えていた。

しかし、この章ではもっと人間の考えに沿った、コメントの書き方が紹介されていた。

**コメントの目的は、書き手の意図を読み手に知らせることである。**

コメントを読む人も人間なので、読む人のことを想定して必要な言葉をかけるというのが、一番大事なことなのだと認識した。